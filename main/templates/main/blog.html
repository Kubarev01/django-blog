{% extends "includes/base.html" %}
{% load static %}
{% load posts_tags %}

<!DOCTYPE html>


{% block css %}
 <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

    <link rel="stylesheet" href="{% static "deps/css/bootstrap/bootstrap.min.css" %}">

    
    <link rel="stylesheet" type="text/css" href="{% static "deps/css/common.css" %}" >
    <link rel="stylesheet" type="text/css" href="{% static "deps/css/fonts.css"  %}">
    <link rel="stylesheet" type="text/css" href="{% static "deps/css/Index.css" %}">
    <link rel="stylesheet" type="text/css" href="{% static "deps/css/navbar.css"%}" >
    <link rel="stylesheet" type="text/css" href="{% static "deps/css/carousel.css" %}" >
    <link rel="stylesheet" type="text/css" href="{% static "deps/css/footer.css" %}" >
    <link rel="stylesheet" type="text/css" href="{% static "deps/css/blog.css" %}">

{% endblock css %}
   


{% block content %}
    <div class="container-fluid">
            <div class="row">
                <div class="col-2 "></div>
                <div class="col-8 ">
                    <div class="card blog-card mb-3 w-100">

                        <div class="row g-0">
                            <img class="blog-img-background" style="border-right: 2px solid #d8d7d7;"
                                src={{post.image.url}}>
                            <div class="col-md-4" style="position: absolute; left: 7.5px; top: 10px;">

                                <img src={{post.image.url}} class="img-fluid rounded-start blog-img" alt="...">
                                <h5 class="card-title">{{post.title}}</h5>
                                <p class="author">{{post.made_by.username}}</p>
                                <p class="description" style="color: #d8d7d7; padding: 1.5em;">{{post.description|truncatechars:155}}</p>
                            </div>
                            </img>

                            <div class="col-md-8">
                                <div class="card-body" style="height: 400px; ">

                                    <div data-bs-spy="scroll" data-bs-target="#navbar-example2"
                                        data-bs-root-margin="0px 0px -40%" data-bs-smooth-scroll="true"
                                        class="scrollspy-example  p-3 rounded-2" tabindex="0"
                                        style="height: 400px; overflow-y: scroll; ">
                                        
                                        <p>{{post.text}}</p>
                                        
                                       
                                        
                                    </div>


                                </div>
                                <div class="comment-container">
                                    <div class="comment-form">
                                        <form action="{% url "comments:leave_a_comment" post.slug %}" id="commentForm" method='POST'>
                                            {% csrf_token %}
                                            {% if form.errors %}<div class="alert alert-warning" style="border-radius:25px; font-size:12px">{{form.errors}}</div>
                                            {% endif %}
                                            <div class="mb-3">
                                                <input class="form-control-comment" name='text' rows="1"
                                                    placeholder="Оставить комментарий"></input>
                                               <a onclick="event.preventDefault(); document.getElementById('commentForm').submit();"><img class="airplane" src="{% static 'deps/assets/airplane.png' %}"></a>
                                                <a href="#"><img class="airplane" src={% static "deps/assets/heart.png" %} alt=""
                                                        style="margin-left: 100px;"></a>
                                            </div>
                                        </form>

                                        <div class="comments" id="commentsSection">
                                            <div class="accordion accordion-flush" id="accordionFlushExample">
                                                <div class="accordion-item">
                                                    <h2 class="accordion-header">
                                                        <button class="accordion-button collapsed" type="button"
                                                            data-bs-toggle="collapse"
                                                            data-bs-target="#flush-collapseOne" aria-expanded="false"
                                                            aria-controls="flush-collapseOne"
                                                            onclick="toggleComments()">
                                                            Комментарии
                                                        </button>
                                                    </h2>
                                                   
                                                    <div id="flush-collapseOne" class="accordion-collapse collapse "
                                                        data-bs-parent="#accordionFlushExample">
                                                        <div class="accordion-body scrollspy-example" style="height: 250px;" data-bs-spy="scroll" data-bs-target="#navbar-example2" data-bs-root-margin="0px 0px -40%" data-bs-smooth-scroll="true" class="scrollspy-example bg-body-tertiary p-3 rounded-2" tabindex="0">
                                                             {% for comment in comments  %}
                                                            <div class="comment-block">
                                                                <div class="comment-user">
                                                                    <p class="login-user">@{{comment.author.username}}</p>
                                                                    <p class="comment-date">{{comment.created_at}}</p>
                                                                </div>
                                                                <p class="comment-text">{{comment.text}}</p>
                                                            </div>
                                                            {% endfor %}
                                                        </div>
                                                        
                                                    </div>

                                                    
                                                           
                                                            
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-3"></div>
                </div>



{% endblock content %}

      
   

